# Функциональная спецификация

* [1. История проекта](#1-история-проекта)
* [2. Цели дизайна](#2-цели-дизайна)
    * [2.1. Требования пользователя](#21-требования-пользователя)
    * [2.2. Системные требования](#22-системные-требования)
    * [2.3. Сценарии использования](#23-сценарии-использования)
* [3. Исключенные возможности и неподдерживаемые сценарии](#3-исключенные-возможности-и-неподдерживаемые-сценарии)
* [4. Предположения и зависимости](#4-предположения-и-зависимости)
* [5. Проект решения](#5-проект-решения)
    * [5.1. Концептуальный проект](#51-концептуальный-проект)
    * [5.2. Логический проект](#52-логический-проект)
    * [5.3. Физический проект](#53-физический-проект)
* [6. Требования к инсталляции и деинсталляции](#6-требования-к-инсталляции-и-деинсталляции)

## 1. История проекта

## 2. Цели дизайна

### 2.1. Требования пользователя

Цели дизайна интерфейса ориентированы на удовлетворение ключевых потребностей пользователей Coopera:

- Простота использования: минимальное количество кликов для выполнения основных действий (создание и обработка задач, просмотр статуса задач).  
- Наглядность интерфейса: удобная визуализация статусов задач, уведомлений и историй взаимодействия.  
- Консистентность: единый стиль компонентов (кнопки, поля ввода, страницы, сайдбар) для всех частей приложения.  
- Мобильная адаптация: интерфейс должен корректно отображаться на планшетах и смартфонах.    
- Доступность: соблюдение базовых принципов доступности для пользователей с ограниченными возможностями.

### 2.2. Системные требования

Дизайн интерфейса учитывает ограничения аппаратного и программного окружения:

- Frontend:
  - Используются компоненты React + TypeScript для унифицированного и модульного дизайна.
  - Создание переиспользуемых компонентов: кнопки, карточки задач, сайдбар, формы, таблицы и панели уведомлений.
  - Поддержка современных браузеров (Chrome, Firefox, Edge, Safari) и адаптивность под мобильные устройства.
- Backend и интеграция:
  - Совместимость с FastAPI и базой данных PostgreSQL.
  - Интерфейс взаимодействует с RESTful API для получения и отправки данных.
- Производительность:
  - Минимизация задержек при загрузке страниц и обновлении данных.
  - Использование оптимизированных компонентов для рендеринга больших списков задач и заявок.
- Безопасность:
  - Аутентификация и авторизация пользователей.
  - Обработка ошибок и защита от некорректного ввода.
- Расширяемость:
  - Возможность добавления новых компонентов и страниц без глобальной переработки интерфейса.
  - Поддержка интеграции с внешними сервисами (Telegram-бот, уведомления, отчёты).

### 2.3. Сценарии использования

**Сценарий 1: Создание команды и настройка системы**
1. Менеджер регистрируется в системе
2. Создает новую команду
3. Добавляет участников в команду
4. Создает задачи и указывает их вес в баллах

```mermaid
%%{init: {'themeVariables': {'fontSize': '12px', 'nodePadding': '5', 'nodeSpacing': '20', 'rankSpacing': '30'}}}%%
flowchart TD
    A[Начало] --> B[Менеджер открывает приложение Coopera]
    B --> C{Менеджер зарегистрирован в системе?}
    C -- Нет --> D[Регистрация менеджера]
    D --> E[Система подтверждает регистрацию]
    C -- Да --> F[Авторизация менеджера]
    E --> F
    F --> G[Менеджер создает команду]
    G --> H{Название команды уникально?}
    H -- Нет --> I[Вывести ошибку и запросить другое название]
    I --> G
    H -- Да --> J[Система создаёт запись команды]
    J --> K[Менеджер добавляет участников]
    K --> L{Участники существуют в системе?}
    L -- Нет --> M[Система отправляет приглашение для регистрации]
    L -- Да --> N[Добавить участников в команду]
    M --> O[Участники проходят регистрацию]
    O --> N
    N --> R[Система подтверждает создание команды]
    R --> P[Менеджер создаёт задания и указывает вес в баллах]
    P --> Q[Конец]
```
**Сценарий 2: Создание и распределение заявок**

1. Участник/Менеджер создает задачу
2. Задача публикуется в общем списке
3. Участники могут самостоятельно брать задачи
4. Если задача не взята до дедлайна, система автоматически назначает ее

```mermaid
%%{init: {'themeVariables': {'fontSize': '12px', 'nodePadding': '5', 'nodeSpacing': '20', 'rankSpacing': '30'}}}%%
flowchart TD
    A[Начало] --> B[Менеджер или участник создаёт задачу ]
    B --> E[Система публикует задачу]
    E --> F[Показать задачу всем участникам]
    F --> G{Участник берёт задачу?}
    G -- Да --> H[Система закрепляет задачу за участником]
    H --> I[Отправить уведомления о назначении]
    G -- Нет --> J{Дедлайн истёк?}
    J -- Нет --> F
    J -- Да --> K{Есть свободные участники?}
    K -- Да --> L[Система автоматически назначает задачу]
    K -- Нет --> M[Отправить уведомление менеджеру]
    L --> N[Отправить уведомления о назначении]
    M --> N
    N --> O[Конец]
```
**Сценарий 3: Выполнение и подтверждение заявок**

1. Участник выполняет назначенную задачу
2. Создает отчет о выполнении с приложением доказательств
3. Остальные участники получают уведомление о необходимости оценки отчета
4. Участники голосуют за подтверждение/отклонение отчета
5. При единогласном подтверждении задача засчитывается
6. При наличии возражений случай передается на рассмотрение менеджеру

```mermaid
%%{init: {'themeVariables': {'fontSize': '12px', 'nodePadding': '5', 'nodeSpacing': '20', 'rankSpacing': '30'}}}%%
flowchart TD
    A[Начало] --> B[Участник выполняет задачу]
    B --> C{Задача завершена успешно?}
    C -- Нет --> D[Отложить выполнение или отменить задачу]
    D --> E[Система уведомляет менеджера]
    E --> Z[Конец]
    C -- Да --> F[Участник отправляет отчет с доказательствами]
    F --> I[Система сохраняет отчет]
    I --> J[Система уведомляет участников для голосования]
    J --> K{Все участники подтвердили успешное выполнение?}
    K -- Да --> L[Система начисляет баллы]
    K -- Нет --> M{Возражения участников?}
    M -- Нет --> L
    M -- Да --> N[Система передает спор менеджеру]
    N --> O[Менеджер рассматривает спор]
    O --> P{Решение в пользу участника?}
    P -- Да --> L
    P -- Нет --> Q[Задача отклонена, без начисления баллов]
    Q --> Z[Конец]
    L --> R[Обновить рейтинг и статистику]
    R --> Z[Конец]
```
**Сценарий 4: Аналитика и контроль**

1. Менеджер просматривает статистику выполнения задач
2. Анализирует проблемные зоны и тренды
3. Корректирует систему баллов при необходимости
4. Участники отслеживают свой рейтинг и баланс баллов

```mermaid
%%{init: {'themeVariables': {'fontSize': '12px', 'nodePadding': '5', 'nodeSpacing': '20', 'rankSpacing': '30'}}}%%
flowchart TD
    A[Начало] --> B[Менеджер открывает модуль аналитики]
    B --> C{Есть активные команды?}
    C -- Нет --> D[Вывести сообщение: Нет данных]
    D --> Z[Конец]
    C -- Да --> E[Менеджер выбирает команду и период]
    E --> F[Система загружает статистику]
    F --> G{Данные найдены?}
    G -- Нет --> H[Вывести сообщение: Нет данных за выбранный период]
    H --> Z[Конец]
    G -- Да --> I[Показать графики и отчеты]
    I --> J[Менеджер применяет фильтры и анализирует данные]
    J --> K{Обнаружены проблемы?}
    K -- Нет --> L[Просмотр завершен]
    K -- Да --> M[Менеджер корректирует систему баллов]
    M --> N[Система сохраняет изменения]
    N --> L
    L --> O[Участники отслеживают свой рейтинг и баланс баллов]
    O --> Z[Конец]
```

**Сценарий 5: Обмен задачами**

1. Участник, не имеющий возможности выполнить назначенную задачу, инициирует обмен
2. Другие участники видят запрос на обмен
3. Желающий принять задачу подтверждает обмен
4. Если никто не согласен на обмен, менеджер получает уведомление для ручного перераспределения
5. Система обновляет назначения и уведомляет соответствующих участников

```mermaid
%%{init: {'themeVariables': {'fontSize': '12px', 'nodePadding': '5', 'nodeSpacing': '20', 'rankSpacing': '30'}}}%%
flowchart TD
    A[Начало] --> B[Участник запрашивает обмен задачи]
    B --> C[Система публикует запрос на обмен]
    C --> D{Есть участники, готовые принять задачу?}
    D -- Да --> E[Выбор участника для обмена]
    E --> F[Система переназначает задачу и уведомляет обе стороны]
    D -- Нет --> G{Менеджер доступен?}
    G -- Да --> H[Система уведомляет менеджера]
    H --> I[Менеджер перераспределяет вручную и уведомляет участников]
    G -- Нет --> J[Запрос сохраняется в очереди до появления менеджера]
    F --> Z[Конец]
    I --> Z
    J --> Z
```

## 3. Исключенные возможности и неподдерживаемые сценарии

## 4. Предположения и зависимости

## 5. Проект решения

### 5.1. Концептуальный проект

### 5.2. Логический проект

### 5.3. Физический проект

## 6. Требования к инсталляции и деинсталляции
